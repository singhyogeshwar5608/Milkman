import{u as w,b as k,r as n,j as e,C as o}from"./index-B3Ma6YUV.js";import{U as S}from"./user-Dlt6hQcs.js";import"./createLucideIcon-Cxa5orDZ.js";const g="singh.yogeshwar5608@gmail.com",b={demo:"Demo - 3 entries free",monthly:"Monthly - ₹99",half_yearly:"6 Months - ₹549",yearly:"12 Months - ₹1049"},Y=()=>{const{user:s,logout:j}=w(),{subscription:r,diaryEntries:y}=k(),[d,c]=n.useState(""),[m,x]=n.useState(""),[u,h]=n.useState("idle"),i=(s?.email?.toLowerCase()||"")==="larawansdigital@gmail.com"?null:r?.entryLimit??3,p=y.length,a=i===null?null:Math.max(i-p,0),N=n.useMemo(()=>r?b[r.plan]:b.demo+" (default)",[r]);n.useEffect(()=>{if(s)try{const t=`milkman-profile-${s.uid||s.email}`,l=window.localStorage.getItem(`${t}-phone`),f=window.localStorage.getItem(`${t}-address`);l&&c(l),f&&x(f)}catch{}},[s]);const v=t=>{if(t.preventDefault(),!!s)try{const l=`milkman-profile-${s.uid||s.email}`;window.localStorage.setItem(`${l}-phone`,d.trim()),window.localStorage.setItem(`${l}-address`,m.trim()),h("success")}catch{h("error")}};return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-slate-50",children:"Profile & Subscription"}),e.jsx("p",{className:"text-gray-600 dark:text-slate-300 mt-1",children:"View your account and subscription details."})]}),e.jsx(o,{title:"Your Profile",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"h-14 w-14 rounded-full bg-blue-600/90 dark:bg-slate-700 flex items-center justify-center text-white text-xl flex-shrink-0",children:e.jsx(S,{size:26})}),e.jsxs("form",{onSubmit:v,className:"flex-1 space-y-2 text-sm text-gray-700 dark:text-slate-100",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mb-1",children:"These details are stored only on this device and help you remember your own contact info."}),u==="success"&&e.jsx("div",{className:"rounded-lg bg-green-50 border border-green-200 text-green-800 px-3 py-2 text-xs",children:"Profile details saved on this device."}),u==="error"&&e.jsx("div",{className:"rounded-lg bg-red-50 border border-red-200 text-red-800 px-3 py-2 text-xs",children:"Could not save profile locally."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Your mobile number"}),e.jsx("input",{type:"tel",value:d,onChange:t=>c(t.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., +91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Your address"}),e.jsx("textarea",{value:m,onChange:t=>x(t.target.value),rows:2,className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Street, village / city, state"})]}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium",children:"Save profile"})]})]})}),e.jsxs(o,{title:"Account",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-slate-100",children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",s.email]}),e.jsx("div",{className:"mt-3 md:hidden",children:e.jsx("button",{onClick:()=>j(),className:"inline-flex items-center px-4 py-1.5 rounded-lg bg-red-600 hover:bg-red-700 text-white text-xs font-medium",children:"Logout"})}),s.email===g&&e.jsx("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400 font-medium",children:"You are the owner/admin of this app."})]}),e.jsxs(o,{title:"Current Subscription",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-slate-100",children:[e.jsx("span",{className:"font-semibold",children:"Plan:"})," ",N]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-slate-100 mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Start date:"})," ",r.startDate]}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-slate-100 mt-1",children:[e.jsx("span",{className:"font-semibold",children:"End date:"})," ",r.endDate||"—"]})]}),i===null?e.jsx("p",{className:"mt-3 text-sm text-green-700 dark:text-green-400 font-medium",children:"You have unlimited entries on your current plan."}):e.jsxs("p",{className:"mt-3 text-sm text-yellow-800 dark:text-yellow-200",children:["You have used ",e.jsx("span",{className:"font-semibold",children:p})," of"," ",e.jsx("span",{className:"font-semibold",children:i})," free entries.",a!==null&&a>0&&e.jsxs("span",{children:[" ","You have ",e.jsx("span",{className:"font-semibold",children:a})," left."]}),a!==null&&a<=0&&e.jsx("span",{children:" Your free entries are finished."})]})]}),e.jsxs(o,{title:"Available Plans",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-slate-100 mb-3",children:["To change your plan, please message the owner at"," ",e.jsx("span",{className:"font-mono",children:g}),". They will update your subscription in the admin panel."]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-800 dark:text-slate-100",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Demo:"})," 3 entries free to try the app."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"Monthly (₹99):"})," Unlimited entries for 1 month."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"6 Months (₹549):"})," Unlimited entries for 6 months."]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-semibold",children:"12 Months (₹1049):"})," Unlimited entries for 12 months."]})]})]})]}):e.jsx("p",{className:"text-red-600",children:"You must be logged in to view your profile."})};export{Y as Profile};
