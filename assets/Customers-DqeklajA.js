import{j as e,r as h,I as p,B as f,b as y,c as g}from"./index-B3Ma6YUV.js";import{c as b}from"./createLucideIcon-Cxa5orDZ.js";import{T as N,P as v}from"./trash-2-CDTV4Bd7.js";import{P as C,M as P}from"./phone-CxUxzk39.js";import{M as w}from"./Modal-BNTK6mZB.js";const Q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],E=b("pencil",Q),U=({customers:a,onEdit:m,onDelete:u,onViewDetail:t})=>a.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg",children:"No customers yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Add your first customer to get started"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:a.map(s=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 md:p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("button",{type:"button",onClick:()=>t(s.id),className:"text-left",children:e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 hover:underline",children:s.name})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>m(s),className:"text-blue-600 hover:text-blue-800",title:"Edit",children:e.jsx(E,{size:18})}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this customer?")&&u(s.id)},className:"text-red-600 hover:text-red-800",title:"Delete",children:e.jsx(N,{size:18})})]})]}),e.jsxs("div",{className:"space-y-2 text-xs md:text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Default Quantity:"}),e.jsxs("span",{className:"font-medium",children:[s.defaultQuantity," L"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Price per Liter:"}),e.jsxs("span",{className:"font-medium",children:["₹",s.pricePerUnit]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Daily Amount:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["₹",(s.defaultQuantity*s.pricePerUnit).toFixed(2)]})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-2 pt-2 border-t",children:[e.jsx(C,{size:12}),e.jsx("span",{children:s.phone})]}),s.address&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{size:12}),e.jsx("span",{className:"truncate",children:s.address})]})]})]},s.id))}),k=({customer:a,onSubmit:m,onCancel:u})=>{const[t,s]=h.useState({name:a?.name||"",defaultQuantity:a?.defaultQuantity||0,pricePerUnit:a?.pricePerUnit||0,phone:a?.phone||"",address:a?.address||""}),[c,l]=h.useState({}),r=n=>{const{name:d,value:x}=n.target;s(i=>({...i,[d]:d==="defaultQuantity"||d==="pricePerUnit"?parseFloat(x)||0:x})),c[d]&&l(i=>({...i,[d]:""}))},o=()=>{const n={};return t.name.trim()||(n.name="Name is required"),t.defaultQuantity<=0&&(n.defaultQuantity="Quantity must be greater than 0"),t.pricePerUnit<=0&&(n.pricePerUnit="Price must be greater than 0"),l(n),Object.keys(n).length===0},j=n=>{n.preventDefault(),o()&&m(t)};return e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsx(p,{label:"Customer Name *",name:"name",value:t.name,onChange:r,error:c.name,placeholder:"Enter customer name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{label:"Default Quantity (Liters) *",name:"defaultQuantity",type:"number",step:"0.5",min:"0",value:t.defaultQuantity,onChange:r,error:c.defaultQuantity,placeholder:"e.g., 2"}),e.jsx(p,{label:"Price per Liter (₹) *",name:"pricePerUnit",type:"number",step:"0.01",min:"0",value:t.pricePerUnit,onChange:r,error:c.pricePerUnit,placeholder:"e.g., 60"})]}),e.jsx(p,{label:"Phone Number",name:"phone",type:"tel",value:t.phone,onChange:r,placeholder:"Enter phone number"}),e.jsx(p,{label:"Address",name:"address",value:t.address,onChange:r,placeholder:"Enter address"}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(f,{type:"button",variant:"secondary",onClick:u,children:"Cancel"}),e.jsxs(f,{type:"submit",variant:"primary",children:[a?"Update":"Add"," Customer"]})]})]})},L=()=>{const{customers:a,addCustomer:m,updateCustomer:u,deleteCustomer:t}=y(),s=g(),[c,l]=h.useState(!1),[r,o]=h.useState(),j=()=>{o(void 0),l(!0)},n=i=>{o(i),l(!0)},d=i=>{r?u(r.id,i):m(i),l(!1),o(void 0)},x=()=>{l(!1),o(void 0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Customers"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 mt-1",children:"Manage your customer database"})]}),e.jsxs(f,{size:"sm",onClick:j,className:"w-full sm:w-auto justify-center",children:[e.jsx(v,{size:20,className:"mr-2"}),"Add Customer"]})]}),e.jsx(U,{customers:a,onEdit:n,onDelete:t,onViewDetail:i=>s(`/customers/${i}`)}),e.jsx(w,{isOpen:c,onClose:x,title:r?"Edit Customer":"Add New Customer",children:e.jsx(k,{customer:r,onSubmit:d,onCancel:x})})]})};export{L as Customers};
